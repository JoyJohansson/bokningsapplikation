{% extends "base.html" %}

    <title>{% block title %}Bokningsapplikation{% endblock %}</title>
</head>
<body>
{% block content %}
<div class="info-container">
    <h2>Välkommen till Crazy Frog Hotel </h2>
    <h2>Ange datum för din vistelse</h2>

    <form action="/K2" method="post" onsubmit="saveDates()">
        <label for="start_date">Ankomstdatum:</label>
        <input type="date" id="start_date" name="start_date" required>

        <label for="end_date">Avresedatum:</label>
        <input type="date" id="end_date" name="end_date" required>

        <label for="guests">Antal gäster:</label>
        <select id="guests" name="guests" required>
            <option value="1">1 gäst</option>
            <option value="2">2 gäster</option>
            <option value="3">3 gäster</option>
            <option value="4">4 gäster</option>
            <option value="5">5 gäster</option>
            <option value="6">6 gäster</option>
        </select>

        <button type="submit">Se rum</button>
        <script>
            // Save values to sessionStorage when the form is submitted
            document.addEventListener('DOMContentLoaded', function () {
                document.querySelector('form').addEventListener('submit', function (event) {
                    const start_date = document.getElementById('start_date').value;
                    const end_date = document.getElementById('end_date').value;
                    const guests = document.getElementById('guests').value;
    
                    // Save values to sessionStorage
                    sessionStorage.setItem('start_date', start_date);
                    sessionStorage.setItem('end_date', end_date);
                    sessionStorage.setItem('guests', guests);
                    
            // Log values to the console for debugging
            console.log('Start Date:', start_date);
            console.log('End Date:', end_date);
            console.log('Guests:', guests);
        });
                });
        </script>

        <table>
            <thead>
                {% if result %}
                <tr>
                    <th>Välj rum</th>
                </tr>
            </thead>
            <tbody>
                <p>Tillgängliga rum</p>
{% for row in result %}
    <tr>
        <td>{{ row[0] }}</td>
        
        <td><img src="static/img/08e5b9ba-8d64-4c2f-b31a-ba803e022655.webp" alt="Room Image" width="300"></td>
        <td>
            <a href="/room_info?room_id={{ row[1] }}" class="btn btn-info">
                View Details
            </a>
        </td>
    </tr>
{% endfor %}
            </tbody>
        </table>
    </form>
</div>
{% endblock %}
</body>
</html>